module.exports.config={name:"bans",version:"1.0.0",hasPermssion:1,credits:"ManhG",description:"C?m ngu?i dùng da`nh riêng cho QTV BOX chat",commandCategory:"group",usages:"[ID or text] hoa?c tag@",cooldowns:5},module.exports.languages={vi:{reason:"Lý do",at:"vào lúc",allCommand:"toàn b? l?nh",commandList:"nh?ng l?nh",banSuccess:"[ Ban User ] Ðã x? lý thành công yêu c?u c?m ngu?i dùng: %1",banCommandSuccess:"[ banCommand User ] Ðã x? lý thành công yêu c?u c?m l?nh d?i v?i ngu?i dùng: %1",errorReponse:"%1 Không th? hoàn t?t công vi?c b?n yêu c?u",IDNotFound:"%1 ID ngu?i dùng b?n nh?p không t?n t?i trong co s? d? li?u",existBan:"[ Ban User ] Ngu?i dùng %1 dã b? ban t? tru?c %2 %3",missingCommandInput:"%1 Ph?n command c?n c?m không du?c d? tr?ng!",returnBan:"[ Ban User ] Hi?n t?i b?n dang yêu c?u c?m ngu?i dùng:\n- ID và tên ngu?i dùng c?n c?m: %1%2\n\n? Reaction tin nh?n này d? xác th?c ?",returnBanCommand:"[ banCommand User ] Hi?n t?i b?n dang yêu c?u c?m s? d?ng l?nh d?i v?i ngu?i dùng:\n - ID và tên ngu?i dùng c?n c?m: %1\n- Các l?nh c?n c?m: %2\n\n? Reaction tin nh?n này d? xác th?c ?",returnResult:"Ðây là k?t qu? phù h?p: \n",returnNull:"Không tìm th?y k?t qu? d?a vào tìm ki?m c?a b?n!",returnList:"[ User List ]\nHi?n t?i dang có %1 ngu?i dùng b? ban, du?i dây là %2 ngu?i dùng\n\n%3",returnInfo:"[ Info User ] Ðây là m?t sô thông tin v? ngu?i dùng b?n c?n tìm:\n- ID và tên c?a ngu?i dùng: %1n- Có b? ban?: %2 %3 %4\n- B? ban l?nh?: %5"},en:{reason:"Reason",at:"At",allCommand:"All commands",commandList:"Commands",banSuccess:"[ Ban User ] Banned user: %1",banCommandSuccess:"[ banCommand User ] Banned command with user: %1",errorReponse:"%1 Can't do what you request",IDNotFound:"%1 ID you import doesn't exist in database",existBan:"[ Ban User ] User %1 has been banned before %2 %3",missingCommandInput:"%1 You have to import the command you want to ban!",returnBan:"[ Ban User ] You are requesting to ban user:\n- User ID and name who you want to ban: %1%2\n\n? Reaction this message to complete ?",returnBanCommand:"[ banCommand User ] You are requesting to ban command with user:\n - User ID and name who you want to ban: %1\n- Commands: %2\n\n? Reaction this message to complete ?",returnResult:"This is your result: \n",returnNull:"There is no result with your input!",returnList:"[ User List ]There are %1 banned user, here are %2 user\n\n%3",returnInfo:"[ Info User ] Here is some information about the user who you want to find:\n- User ID and name: %1n- Banned?: %2 %3 %4\n- Command banned?: %5"}},module.exports.handleReaction=async({event:n,api:e,Users:a,handleReaction:t,getText:s})=>{if(parseInt(n.userID)!==parseInt(t.author))return;const r=require("moment-timezone"),{threadID:o}=n,{messageID:i,type:d,targetID:m,reason:u,nameTarget:g}=t,c=r.tz("Asia/Ho_Chi_minh").format("HH:MM:ss L");if(global.client.handleReaction.splice(global.client.handleReaction.findIndex((n=>n.messageID==i)),1),"ban"===d)try{let n=(await a.getData(m)).data||{};return n.banned=!0,n.reason=u||null,n.dateAdded=c,await a.setData(m,{data:n}),global.data.userBanned.set(m,{reason:n.reason,dateAdded:n.dateAdded}),e.sendMessage(s("banSuccess",`${m} - ${g}`),o,(()=>e.unsendMessage(i)))}catch{return e.sendMessage(s("errorReponse","[ Ban User ]"),o)}},module.exports.run=async({event:n,api:e,args:a,Users:t,getText:s})=>{const{threadID:r,messageID:o}=n;var i=String(a[0]),d=a.slice(2,a.length).join(" ")||null;if(isNaN(i)){const e=Object.keys(n.mentions);a=a.join(" "),i=String(e[0]),d=a.slice(a.indexOf(n.mentions[e[0]])+(n.mentions[e[0]]||"").length+1,a.length)||null}if(!global.data.allUserID.includes(i))return e.sendMessage(s("IDNotFound","[ Ban User ]"),r,o);if(global.data.userBanned.has(i)){const{reason:n,dateAdded:a}=global.data.userBanned.get(i)||{};return e.sendMessage(s("existBan",i,n?`${s("reason")}: "${n}"`:"",a?`${s("at")} ${a}`:""),r,o)}const m=global.data.userName.get(i)||await t.getNameUser(i);return e.sendMessage(s("returnBan",`${i} - ${m}`,d?`\n- ${s("reason")}: ${d}`:""),r,((e,a)=>{global.client.handleReaction.push({type:"ban",targetID:i,reason:d,nameTarget:m,name:this.config.name,messageID:a.messageID,author:n.senderID})}),o)};